<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Khushi's Wordle ðŸ’›</title>
  <style>
    body {
      font-family: 'Helvetica Neue', sans-serif;
      background-color: #f8f9fa;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      height: 100vh;
      margin: 0;
      padding-top: 40px;
    }
    h1 { color: #333; margin-bottom: 20px; text-align: center; }
    #board {
      display: grid;
      grid-template-rows: repeat(6, 1fr);
      grid-gap: 5px;
    }
    .row {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      grid-gap: 5px;
    }
    .tile {
      width: 60px;
      height: 60px;
      border: 2px solid #d3d6da;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2em;
      text-transform: uppercase;
      background-color: white;
      font-weight: bold;
      transition: background-color 0.2s ease;
    }
    .correct { background-color: #6aaa64; color: white; border-color: #6aaa64; }
    .present { background-color: #c9b458; color: white; border-color: #c9b458; }
    .absent { background-color: #787c7e; color: white; border-color: #787c7e; }
    button {
      margin: 10px;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 8px;
      border: none;
      background-color: #6aaa64;
      color: white;
      cursor: pointer;
    }
    button:hover { opacity: 0.9; }
    #hidden-input {
      position: absolute;
      opacity: 0;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <h1>Khushi's Wordle ðŸ’›</h1>
  <div id="board"></div>
  <button id="play-again" style="display:none;">Play Again</button>
  <button id="share" style="display:none;">Share Result</button>

  <!-- Hidden input to trigger mobile keyboard -->
  <input id="hidden-input" type="text" maxlength="1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" />

  <script>
    const validAnswers = [
      "apple","grape","lemon","mango","pearl","crane","flute","smile","tiger","zebra","brave","charm","flame","ocean","spice",
      "lucky","dream","heart","storm","earth","cloud","river","sugar","swing","trail","glory","night","light","chase","truth",
      "angel","crown","giant","magic","sword","stone","roast","green","bloom","shine","taste","glass","bread","beach","spark",
      "quilt","piano","horse","blush","amber","frost","ghost","berry","punch","cocoa","daisy","vivid","honey","grind","chili",
      "crisp","steel","witty","class","noble","wheat","paint","siren","sweet","plume","cider","fable","eagle","flair","grill",
      "lunar","melon","olive","peony","quest","raven","scoop","toast","vapor","whale","zesty","blaze","elite","fancy","jewel",
      "linen","mirth","nurse","oasis","quake","rider","sandy","tidal","woven","youth","amber","candy","flask","gleam","hazel",
      "index","jolly","kneel","latch","mimic","naval","perch","quirk","reign","savor","tempo","unity","vital","woven","zebra"
    ];

    let answer = validAnswers[Math.floor(Math.random() * validAnswers.length)];
    let currentRow = 0, currentCol = 0, gameOver = false;
    let resultsGrid = [];
    const board = document.getElementById("board");
    const input = document.getElementById("hidden-input");
    const playAgainBtn = document.getElementById("play-again");
    const shareBtn = document.getElementById("share");

    // Create grid
    for (let i = 0; i < 6; i++) {
      const row = document.createElement("div");
      row.classList.add("row");
      for (let j = 0; j < 5; j++) {
        const tile = document.createElement("div");
        tile.classList.add("tile");
        row.appendChild(tile);
      }
      board.appendChild(row);
    }

    // Focus hidden input on tap to open mobile keyboard
    document.body.addEventListener("click", () => {
      input.focus();
    });

    // Handle input from keyboard
    document.addEventListener("keydown", handleKey);
    input.addEventListener("input", e => {
      const val = e.target.value;
      if (/^[a-zA-Z]$/.test(val)) handleKey({ key: val });
      input.value = ""; // clear after every key
    });

    function handleKey(e) {
      if (gameOver) return;
      const rows = document.querySelectorAll(".row");
      const currentTiles = rows[currentRow].querySelectorAll(".tile");

      if (e.key === "Backspace") {
        if (currentCol > 0) {
          currentCol--;
          currentTiles[currentCol].textContent = "";
        }
      } else if (e.key === "Enter") {
        if (currentCol === 5) checkGuess(currentTiles);
      } else if (/^[a-zA-Z]$/.test(e.key)) {
        if (currentCol < 5) {
          currentTiles[currentCol].textContent = e.key.toUpperCase();
          currentCol++;
        }
      }
    }

    function checkGuess(tiles) {
      const guess = Array.from(tiles).map(t => t.textContent.toLowerCase()).join("");
      const answerLetters = answer.split("");
      const guessLetters = guess.split("");

      const answerCount = {};
      answerLetters.forEach(l => answerCount[l] = (answerCount[l] || 0) + 1);

      const result = Array(5).fill("absent");

      // Pass 1: mark greens and reduce count
      for (let i = 0; i < 5; i++) {
        if (guessLetters[i] === answerLetters[i]) {
          result[i] = "correct";
          answerCount[guessLetters[i]]--;
        }
      }

      // Pass 2: mark yellows for remaining letters
      for (let i = 0; i < 5; i++) {
        if (result[i] === "correct") continue;
        const letter = guessLetters[i];
        if (answerCount[letter] > 0) {
          result[i] = "present";
          answerCount[letter]--;
        }
      }

      // Apply colors
      let emojiRow = "";
      for (let i = 0; i < 5; i++) {
        tiles[i].classList.add(result[i]);
        emojiRow += result[i] === "correct" ? "ðŸŸ©" : result[i] === "present" ? "ðŸŸ¨" : "â¬œ";
      }
      resultsGrid.push(emojiRow);

      if (guess === answer) endGame(true);
      else if (currentRow === 5) endGame(false);
      else {
        currentRow++;
        currentCol = 0;
      }
    }

    function endGame(won) {
      gameOver = true;
      playAgainBtn.style.display = "inline-block";
      shareBtn.style.display = "inline-block";
      const msg = won ? `ðŸŽ‰ You got it! The word was ${answer.toUpperCase()}` : `âŒ Game over! The word was ${answer.toUpperCase()}`;
      alert(msg);
    }

    playAgainBtn.onclick = () => location.reload();
    shareBtn.onclick = () => {
      const text = `Khushi's Wordle ðŸ’›\n${resultsGrid.join("\n")}\nhttps://rishiiiraj.github.io/Wordle/`;
      navigator.clipboard.writeText(text);
      alert("Copied results to clipboard!");
    };
  </script>
</body>
</html>
